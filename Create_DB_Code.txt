CREATE TABLE Customer
(cid INT NOT NULL AUTO_INCREMENT,
First_Name VARCHAR(50) NOT NULL,
Last_Name VARCHAR(75) NOT NULL,
Address VARCHAR(255) NOT NULL,
City VARCHAR(255) NOT NULL,
State VARCHAR(2) NOT NULL,
Zip VARCHAR(12) NOT NULL,
Phone VARCHAR(20),
Email VARCHAR(255),
Delegates VARCHAR(255),
mid INT,
midOther VARCHAR(255),
PRIMARY KEY (cid),
FOREIGN KEY (mid) REFERENCES Marketing(mid));

CREATE TABLE Marketing
(mid INT NOT NULL AUTO_INCREMENT,
channel VARCHAR(20) NOT NULL,
PRIMARY KEY (mid));

CREATE TABLE Cust_has_CSA
(cid INT NOT NULL,
csaid INT NOT NULL,
lid INT NOT NULL,
FOREIGN KEY (cid) REFERENCES Customer(cid) ON DELETE CASCADE,
FOREIGN KEY (csaid) REFERENCES CSAType(csaid),
FOREIGN KEY (lid) REFERENCES Location(lid));

CREATE TABLE Cust_has_Bal
(cid INT NOT NULL,
balance DECIMAL (9,2) NOT NULL DEFAULT 0,
FOREIGN KEY (cid) REFERENCES Customer(cid) ON DELETE CASCADE);


CREATE TABLE Cust_makes_Transaction
(cid INT NOT NULL,
tid INT NOT NULL,
FOREIGN KEY (cid) REFERENCES Customer(cid) ON DELETE CASCADE,
FOREIGN KEY (tid) REFERENCES Transaction(tid) ON DELETE CASCADE);

CREATE TABLE CSAType
(csaid INT NOT NULL AUTO_INCREMENT,
type VARCHAR(255) NOT NULL,
price DECIMAL (9,2) NOT NULL DEFAULT 0,
PRIMARY KEY (csaid));

CREATE TABLE CSALocation
(lid INT NOT NULL AUTO_INCREMENT,
name VARCHAR(255),
address VARCHAR(255),
city VARCHAR(255),
state VARCHAR(2),
zip VARCHAR(12),
time VARCHAR(100),
PRIMARY KEY (lid));

CREATE TABLE Cust_makes_Pickup
(cid INT NOT NULL,
pDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
lid INT NOT NULL,
FOREIGN KEY (cid) REFERENCES Customer(cid) ON DELETE CASCADE,
FOREIGN KEY (lid) REFERENCES Location(lid));

CREATE TABLE Transaction
(tid INT NOT NULL AUTO_INCREMENT,
cid INT NOT NULL,
tPrice DECIMAL (9,2) NOT NULL DEFAULT 0,
pDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
lid INT NOT NULL,
PRIMARY KEY (tid),
FOREIGN KEY (cid) REFERENCES Customer(cid) ON DELETE CASCADE,
FOREIGN KEY (lid) REFERENCES Location(lid));


